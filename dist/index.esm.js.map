{"version":3,"file":"index.esm.js","sources":["../src/Calculator/styles.ts","../src/Calculator/toast.ts","../src/Calculator/index.tsx"],"sourcesContent":["import { StyleSheet } from \"react-native\";\n\nconst styles = StyleSheet.create({\n  container: {},\n  row: {\n    flexDirection: \"row\",\n  },\n  eachButton: {\n    flex: 1,\n    padding: 12,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    margin: 6,\n    borderRadius: 12,\n    backgroundColor: \"#542e71\",\n  },\n  value: {\n    color: \"#ffffff\",\n    fontWeight: \"bold\",\n  },\n});\n\nexport default styles;\n","import { Platform, ToastAndroid, Alert } from \"react-native\";\n\nconst showMessage = (message: string, type: \"success\" | \"danger\") => {\n  if (Platform.OS === \"android\") {\n    ToastAndroid.showWithGravity(\n      message,\n      ToastAndroid.SHORT,\n      ToastAndroid.BOTTOM\n    );\n  } else {\n    Alert.alert(type === \"success\" ? \"Success!\" : \"Failed!\", message);\n  }\n};\n\nconst showError = (message: string) => {\n  showMessage(message, \"danger\");\n};\n\nexport { showError };\n","import React, { useCallback } from \"react\";\nimport {\n  View,\n  TouchableOpacity,\n  Text,\n  ViewStyle,\n  TextStyle,\n} from \"react-native\";\n\nimport styles from \"./styles\";\nimport { showError } from \"./toast\";\n\nconst buttons: Array<{ row: number; elements: Array<string> }> = [\n  { row: 1, elements: [\"AC\", \"/\", \"*\", \"DEL\"] },\n  { row: 2, elements: [\"1\", \"2\", \"3\", \"-\"] },\n  { row: 3, elements: [\"4\", \"5\", \"6\", \"+\"] },\n  { row: 4, elements: [\"7\", \"8\", \"9\", \".\"] },\n  { row: 5, elements: [\"0\", \"=\"] },\n];\n\nconst operator: Array<string> = [\"/\", \"+\", \"-\", \"*\", \"=\", \".\"];\n\ninterface Props {\n  displayValue: string;\n  updateDisplayValue: (val: string) => void;\n  buttonStyle?: ViewStyle | ViewStyle[];\n  buttonTextStyle?: TextStyle | TextStyle[];\n}\n\nconst Calculator = ({\n  displayValue,\n  updateDisplayValue,\n  buttonStyle,\n  buttonTextStyle,\n}: Props) => {\n  const safeEvaluate = (expression: string) => {\n    // Only allow numbers, basic math operators, and parentheses\n    if (!/^[\\d+\\-*/(). ]+$/.test(expression)) {\n      showError(\"Invalid input.\");\n      return \"\";\n    }\n    try {\n      return String(new Function(`return (${expression})`)());\n    } catch (error) {\n      showError(\"Invalid expression.\");\n      return \"\";\n    }\n  };\n\n  const handlePress = useCallback(\n    (value: string) => {\n      switch (value) {\n        case \"AC\":\n          // Clears the screen.\n          updateDisplayValue(\"\");\n          return;\n        case \"DEL\":\n          if (displayValue) {\n            // Removes the last element.\n            const temp = displayValue.slice(0, -1);\n            updateDisplayValue(temp);\n          }\n          return;\n        case \"=\":\n          if (displayValue) {\n            if (operator.includes(displayValue.slice(-1))) {\n              // Last element cannot be an operator.\n              showError(\"Please, complete the expression.\");\n              return;\n            }\n            if (!operator.some((el) => displayValue.includes(el))) {\n              // if the expression doesn't contain any operator, no need to calculate.\n              return;\n            }\n            // eval does the mathematical expression's calculation.\n            //[ALERT] eval is dangerous. It needs to be checked very well before production.\n            // eslint-disable-next-line no-eval\n            const result = safeEvaluate(displayValue);\n            if (result === \"Infinity\") {\n              showError(\"Inifity result are not allowded.\");\n              return;\n            }\n            updateDisplayValue(result);\n          }\n          return;\n        default:\n          if (!displayValue && operator.includes(value)) {\n            // First element can't be an operator.\n            return;\n          }\n          if (\n            operator.includes(displayValue.slice(-1)) &&\n            operator.includes(value)\n          ) {\n            // Two operators cannot be consecutive.\n            return;\n          }\n          if (displayValue.includes(\".\") && value === \".\") {\n            // If a decimal is already present in the display, another decimal can only be added if an operator separates it as part of a different number.\n            const decimalIndex = displayValue.lastIndexOf(\".\");\n            let operatorExceptDecimalIndex = 0;\n            operator.forEach((el) => {\n              if (el === \".\" || el === \"=\") {\n                return;\n              }\n              const temp = displayValue.lastIndexOf(el);\n              if (temp > operatorExceptDecimalIndex) {\n                operatorExceptDecimalIndex = temp;\n              }\n            });\n            if (operatorExceptDecimalIndex < decimalIndex) {\n              return;\n            }\n          }\n          updateDisplayValue(displayValue + value);\n      }\n    },\n    [displayValue, updateDisplayValue]\n  );\n\n  return (\n    <View style={styles.container}>\n      {buttons.map((el) => (\n        <View key={el.row} style={styles.row}>\n          {el.elements.map((value) => (\n            <TouchableOpacity\n              key={value}\n              style={[styles.eachButton, buttonStyle]}\n              onPress={() => handlePress(value)}\n            >\n              <Text style={[styles.value, buttonTextStyle]}>{value}</Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      ))}\n    </View>\n  );\n};\n\nexport default Calculator;\n"],"names":["styles","StyleSheet","create","container","row","flexDirection","eachButton","flex","padding","justifyContent","alignItems","margin","borderRadius","backgroundColor","value","color","fontWeight","showMessage","message","type","Platform","OS","ToastAndroid","showWithGravity","SHORT","BOTTOM","Alert","alert","showError","buttons","elements","operator","Calculator","_ref","displayValue","updateDisplayValue","buttonStyle","buttonTextStyle","safeEvaluate","expression","test","String","Function","concat","error","handlePress","useCallback","temp","slice","includes","some","el","result","decimalIndex","lastIndexOf","operatorExceptDecimalIndex","forEach","React","createElement","View","style","map","key","TouchableOpacity","onPress","Text"],"mappings":"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"}